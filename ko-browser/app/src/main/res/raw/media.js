const FACEBOOK_HOST_RE=/(\.|^)(facebook|fb).com$/i;const NHACCUATUI_HOST=/(\.|^)nhaccuatui.com$/i;const XVIDEOS_HOST=/(\.|^)xvideos.com$/i;const ZING_MP3_HOST=/(\.|^)mp3.zing.vn$/i;const ZING_TV_HOST=/(\.|^)tv.zing.vn$/i;const XNXX_HOST=/(\.|^)xnxx.com$/i;function run(){var b=location.host;var a;if(b.match(FACEBOOK_HOST_RE)){a=(new Facebook()).init()}else{if(b.match(NHACCUATUI_HOST)){a=(new NCT()).init()}else{if(b.match(XVIDEOS_HOST)){a=(new XVideos()).init()}else{if(b.match(ZING_MP3_HOST)){a=(new ZingMP3()).init()}else{if(b.match(ZING_TV_HOST)){a=(new ZingTV()).init()}else{if(b.match(XNXX_HOST)){a=(new Xnxx()).init()}else{if(isYoutube()){return"isYoutube"}}}}}}}if(a&&a.length>0){return a}return(new Default()).init()}function isYoutube(){const f=/(\.|^)youtu.be$/i;const e=/(\.|^)youtube.com$/i;const c=/(\.|^)www.youtube.com$/i;const b=/(\.|^)m.youtube.com$/i;var d=location.host;var a=d.match(f)||d.match(e)||d.match(c)||d.match(b);return a}function Default(){const e="audio";const h="video";const g="iframe";var d=new Utils();var c=new DataMaker();this.init=function(){var k=[];const j=d.queryAll(e);const i=d.queryAll(h);const l=d.queryAll(g);if(i&&i.length>0){k=a(i,k)}if(j&&j.length>0){k=b(j,k)}if(l&&l.length>0){k=f(l,k)}console.log(k);return k};function f(p,j){for(var m=0;m<p.length;m++){var n=p[m];var q=null;try{q=n.contentDocument||n.contentWindow.document}catch(o){}if(q==null){continue}const l=d.queryAll(e,q);const k=d.queryAll(h,q);if(k&&k.length>0){j=a(k,j)}if(l&&l.length>0){j=b(l,j)}}return j}function b(r,u){for(var q=0;q<r.length;q++){var p=r[q];var l=null;var s=null;if(p){l=p.src;s=p.title}if(!l){var j=p.getElementsByTagName("source");var m="";for(var n=0;n<j.length;n++){if(j[n].src&&j[n].src.indexOf(".mp3")>0){l=j[n].src}}}if(!l){continue}if(!s){s=d.getTitleFromUrl(l)}if(l&&s){var o={};o.title=s;o.audio=[];var t=c.createAudio(s,l,"mp3","");o.audio.push(t);u.push(o)}}return u}function a(n,t){for(var q=0;q<n.length;q++){var m=n[q];var l=null;var r=null;if(m){l=m.src}if(!l){var j=m.getElementsByTagName("source");var u="";for(var o=0;o<j.length;o++){if(j[o].src&&j[o].src.indexOf(".mp4")>0){l=j[o].src}}}if(!l){continue}if(!r){r=d.getTitleFromUrl(l)}if(l&&r){var p={};p.title=r;p.video=[];var s=c.createVideo(r,l,"mp4","","","");p.video.push(s);t.push(p)}}return t}}function Facebook(){const d="a";const f='[data-sigil="inlineVideo"]';var c=new Utils();this.init=function(){var g=e();if(!g||g.length<1){g=b()}return g};function b(){var h=[];const g=c.queryAll(d);g.forEach(function(j){var i=j.href;if(i.indexOf("/video_redirect/?")>=0){h.push(a(j,i))}});return h}function e(){var h=[];const g=c.queryAll(f);g.forEach(function(m){var j=m.getAttribute("data-store");var k={};var i;try{if(j){k=JSON.parse(j);i=k.src}}catch(l){}if(i&&k.type=="video"){h.push(a(m,i))}});return h}function a(j,h){var k={};k.video=[];var o={};o.url=h;o.resolution="";o.bitrate="";o.quality="";o.ext="mp4";var g=null;var l=c.nearestParent(j,'[data-sigil="m-feed-story-attachments-element"]');if(l){const p=c.queryAll("p",l);if(p&&p[0]){g=p[0].innerText}}if(g){k.title=g}else{h=decodeURIComponent(h);var m="";var n=h.indexOf(".mp4?");if(n>0){m=h.substring(0,n)}n=m.lastIndexOf("/");if(n>0){m=m.substring(n+1,m.length)}if(m){k.title=m}}var i=70;if(k.title&&k.title.length>i){while(k.title[i]!=" "&&i<k.title.length-1){i++}k.title=k.title.substring(0,i)}o.namefile=k.title+".mp4";k.video.push(o);return k}}function NCT(){const f="audio";const e="video";var d=new Utils();var c=new DataMaker();this.init=function(){var i=[];if(location.host.match(NHACCUATUI_HOST)){const h=d.queryAll(f);const g=d.queryAll(e);if(g&&g.length>0){i=a(g)}else{if(h&&h.length>0){i=b(h)}}}console.log(i);return i};function b(o){var q=[];var l=o[0];var h=null;var p=null;if(l){h=l.src;p=l.title}if(!h&&l){var g=l.getElementsByTagName("source");var j="";for(var m=0;m<g.length;m++){if(g[m].src.indexOf(".mp3")>0){h=g[m].src}}}if(!h){return q}if(!p){const n=document.getElementById("song-playing");if(n){p=n.innerText}}if(h&&p){var k={};k.title=p;k.audio=[];var r=c.createAudio(p,h,"mp3","");k.audio.push(r);q.push(k)}return q}function a(j){var l=[];var h=null;var m=null;var k=j[0];if(k){h=k.src}if(!h){return l}m=document.title;if(m.indexOf("|")){m=m.substring(0,m.indexOf("|"));m=m.trim()}if(h&&m){var i={};i.title=m;i.video=[];var g=c.createVideo(m,h,"mp4","","","");i.video.push(g);l.push(i)}return l}}function XVideos(){const e=/(\.|^)xvideos.com$/i;const d="video";const g="Xvideos.com";var c=new Utils();var b=new DataMaker();this.init=function(){var i={};if(location.host.match(e)){const h=c.queryAll(d);if(h&&h.length>0){i=a(h)}}console.log(i);return i};function f(){var h=document.querySelector("#main h2");if(!h){return null}var j=h.firstChild;var i=[];while(j){if(j.nodeType==3){i.push(j.data)}j=j.nextSibling}return i.join("").trim()}function a(m){var i=document.body.innerHTML;var o=null;var j=null;var l=null;o=f();o=o||document.title;j=c.between(i,"html5player.setVideoUrlLow('","');");l=c.between(i,"html5player.setVideoUrlHigh('","');");var n=[];var k={};k.title=o;k.video=[];if(j){var h=b.createVideo(o,j,"mp4","","Low","250p");k.video.push(h)}if(l){var h=b.createVideo(o,l,"mp4","","High","360p");k.video.push(h)}n.push(k);return n}}function ZingMP3(){const e="audio";const c="video";const h='[class="title-main-song"]';const b="zplayerjs-wrapper";const d="Zing MP3";var i=new Utils();var f=new DataMaker();this.init=function(){var l=[];if(location.host.match(ZING_MP3_HOST)){const k=i.queryAll(e);const j=i.queryAll(c);if(k&&k.length>0){l=a(k)}else{if(j&&j.length>0){l=g(j)}}}return l};function a(r){var t=[];const p=document.getElementById(b);if(p){var u=p.attributes;var l={};for(var m=0;m<u.length;m++){var q=u[m];if(q.name=="data-source"&&q.value.indexOf("/media/get-source?type=album")>=0){l.link=q.value;l.source="ZingMP3Album";t.push(l);return t}}}var k=null;var s=null;if(r&&r[0]){k=r[0].src;s=r[0].title}if(!k){return n}if(!s){const o=i.queryAll(h);if(o&&o[0]){s=o[0].innerText}}if(!s){s="DefaultName"}if(k&&s){var n={};n.title=s;n.audio=[];var v=f.createAudio(s,k,"mp3","");n.audio.push(v);t.push(n)}return t}function g(m){var n=[];var k=null;var p=null;if(m&&m[0]){k=m[0].src}if(!k){return l}const o=i.queryAll(h);if(o&&o[0]){p=o[0].innerText}if(!p){p="DefaultName"}if(k&&p){var l={};l.title=p;l.video=[];var j=f.createVideo(p,k,"mp4","","","");l.video.push(j);n.push(l)}return n}}function ZingTV(){const e=/(\.|^)tv.zing.vn$/i;const d="video";var c=new Utils();var b=new DataMaker();this.init=function(){var h={};if(location.host.match(e)){const g=c.queryAll(d);if(g&&g.length>0){h=a(g)}}console.log(h);return h};function f(){var g=document.querySelector(".info-video h1");if(!g){return null}var i=g.firstChild;var h=[];while(i){if(i.nodeType==3){h.push(i.data)}i=i.nextSibling}return h.join("").trim()}function a(j){var h=document.body.innerHTML;var m=null;var l=null;m=f();m=m||document.title;l=c.between(h,"mimeType = 'video/mp4';","}];");if(l){l=c.between(l,'source: "','"')}var k=[];var i={};i.title=m;i.video=[];if(l){var g=b.createVideo(m,l,"mp4","","","");i.video.push(g)}k.push(i);return k}}function Xnxx(){const d=/(\.|^)xnxx.com$/i;const e="video";const g="xnxx.com";var c=new Utils();var b=new DataMaker();this.init=function(){var i={};if(location.host.match(d)){const h=c.queryAll(e);if(h&&h.length>0){i=a(h)}}console.log(i);return i};function f(){var h=document.querySelector(".infobar strong");if(!h){return null}var j=h.firstChild;var i=[];while(j){if(j.nodeType==3){i.push(j.data)}j=j.nextSibling}return i.join("").trim()}function a(m){var i=document.body.innerHTML;var o=null;var j=null;var l=null;o=f();o=o||document.title;j=c.between(i,"html5player.setVideoUrlLow('","');");l=c.between(i,"html5player.setVideoUrlHigh('","');");var n=[];var k={};k.title=o;k.video=[];if(j){var h=b.createVideo(o,j,"mp4","","Low","250p");k.video.push(h)}if(l){var h=b.createVideo(o,l,"mp4","","High","360p");k.video.push(h)}n.push(k);return n}}function DataMaker(){this.createAudio=function(e,b,d,c){var a={};a.url=b;a.bitrate=c;a.ext=d;a.namefile=e+"."+d;return a};this.createVideo=function(f,b,e,d,g,c){var a={};a.url=b;a.resolution=c;a.bitrate=d;a.quality=g;a.ext=e;a.namefile=f+"."+e;return a}}function Utils(){this.queryAll=function(a,b){b=b||document;return this.toArray(b.querySelectorAll(a))};this.toArray=function(b){return Array.prototype.slice.call(b)};this.nearestParent=function(b,a){while(b!==null&&b!==document&&!b.matches(a)){b=b.parentNode}return b};this.between=function(b,c,a){var d;d=b.indexOf(c);if(d===-1){return""}b=b.slice(d+c.length);d=b.indexOf(a);if(d===-1){return""}b=b.slice(0,d);return b};this.getTitleFromUrl=function(b){var c=null;var a=decodeURIComponent(b);if(a.indexOf("?")>0){a=a.substring(0,a.indexOf("?"));if(a.indexOf("/")>0){c=a.substring(a.lastIndexOf("/")+1,a.length)}}else{if(a.indexOf("/")>0){c=a.substring(a.lastIndexOf("/")+1,a.length)}}if(c){if(c.lastIndexOf(".mp3")==c.length-4){c=c.substring(0,c.length-4)}else{if(c.lastIndexOf(".mp4")==c.length-4){c=c.substring(0,c.length-4)}}}return c}};